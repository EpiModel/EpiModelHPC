<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Step template to run sims with the result of an swfcalib calibration"><title>Step template to run sims with the result of an swfcalib calibration — step_tmpl_netsim_swfcalib_output • EpiModelHPC</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Step template to run sims with the result of an swfcalib calibration — step_tmpl_netsim_swfcalib_output"><meta property="og:description" content="Step template to run sims with the result of an swfcalib calibration"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">EpiModelHPC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/epimodelhiv-slurmworkflow.html">Using `slurmworkflow` with EpiModel</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/EpiModel/EpiModelHPC/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Step template to run sims with the result of an <code>swfcalib</code> calibration</h1>
      <small class="dont-index">Source: <a href="https://github.com/EpiModel/EpiModelHPC/blob/HEAD/R/swfcalib_helpers.R" class="external-link"><code>R/swfcalib_helpers.R</code></a></small>
      <div class="d-none name"><code>step_tmpl_netsim_swfcalib_output.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Step template to run sims with the result of an <code>swfcalib</code> calibration</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">step_tmpl_netsim_swfcalib_output</span><span class="op">(</span></span>
<span>  <span class="va">path_to_x</span>,</span>
<span>  <span class="va">param</span>,</span>
<span>  <span class="va">init</span>,</span>
<span>  <span class="va">control</span>,</span>
<span>  <span class="va">calib_object</span>,</span>
<span>  <span class="va">n_rep</span>,</span>
<span>  <span class="va">n_cores</span>,</span>
<span>  <span class="va">output_dir</span>,</span>
<span>  libraries <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save_pattern <span class="op">=</span> <span class="st">"restart"</span>,</span>
<span>  setup_lines <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_array_size <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>path_to_x</dt>
<dd><p>Path to a Fitted network model object saved with <code>saveRDS</code>.
(See the <code>x</code> argument to the <code><a href="https://rdrr.io/pkg/EpiModel/man/netsim.html" class="external-link">EpiModel::netsim</a></code> function)</p></dd>


<dt>param</dt>
<dd><p>Model parameters, as an object of class <code>param.net</code>.</p></dd>


<dt>init</dt>
<dd><p>Initial conditions, as an object of class <code>init.net</code>.</p></dd>


<dt>control</dt>
<dd><p>Control settings, as an object of class
<code>control.net</code>.</p></dd>


<dt>calib_object</dt>
<dd><p>a formatted calibration object</p></dd>


<dt>n_rep</dt>
<dd><p>The number of replication to be run for each scenario.</p></dd>


<dt>n_cores</dt>
<dd><p>The number of CPUs on which the simulations will be run.</p></dd>


<dt>output_dir</dt>
<dd><p>The folder where the simulation files are to be stored.</p></dd>


<dt>libraries</dt>
<dd><p>A character vector containing the name of the libraries
required for the model to run. (e.g. EpiModelHIV or EpiModelCOVID)</p></dd>


<dt>save_pattern</dt>
<dd><p>A character vector of what should be kept in the final
<code>netsim</code> objects. It can contain the names of the elements as well as:
"simple" (defautlt) to only keep "epi", "param" and "control"; "restart" to
get the elements required to restart from such file; "all" to not trim the
object at all. <code>c("simple", "el.cuml")</code> is an example of a valid pattern to
save "epi", "param", "control" and "el.cuml". If <code>control$raw.output</code> is
<code>TRUE</code>, this parameter has no effect and the full result is saved.</p></dd>


<dt>setup_lines</dt>
<dd><p>(optional) a vector of bash lines to be run first.
This can be used to load the required modules (like R, python, etc).</p></dd>


<dt>max_array_size</dt>
<dd><p>maximum number of array jobs to be submitted at the
same time. Should be strictly less than the maximum number of jobs you are
allowed to submit to slurm on your HPC.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a template function to be used by <code>add_workflow_step</code></p>


    </div>
    <div class="section level2">
    <h2 id="checkpointing">Checkpointing<a class="anchor" aria-label="anchor" href="#checkpointing"></a></h2>
    

<p>This function takes care of editing <code>.checkpoint.dir</code> to create unique sub
directories for each scenario. The <code><a href="https://rdrr.io/pkg/EpiModel/man/control.net.html" class="external-link">EpiModel::control.net</a></code> way of setting up
checkpoints can be used transparently.</p>
    </div>
    <div class="section level2">
    <h2 id="step-template">Step Template<a class="anchor" aria-label="anchor" href="#step-template"></a></h2>
    


<p>Step Templates are helper functions to be used within <code>add_workflow_step</code>.
Some basic ones are provided by the <code>slurmworkflow</code> package. They instruct
the workflow to run either a bash script, a set of bash lines given as a
character vector or an R script.
Additional Step Templates can be created to simplify specific tasks. The
easiest way to do so is as wrappers around existing templates.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Samuel Jenness.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

